package com.pcs.lib_ztqfj_v2.model.pack.net.lightning;

import android.text.TextUtils;

import com.pcs.lib.lib_pcs_v3.model.pack.PcsPackDown;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.util.ArrayList;
import java.util.List;


/**
 * 下载包：雷电监测--地市地区列表
 * 
 * @author Chensq 2015年11月9日
 */
public class PackThunderListDown extends PcsPackDown {

	public List<AreaList> area_list1 = new ArrayList<AreaList>();

	@Override
	public void fillData(String jsonStr) {
		area_list1.clear();
		if (TextUtils.isEmpty(jsonStr)) {
			return;
		}
		try {
			JSONObject obj = new JSONObject(jsonStr);
			updateMill = obj.optLong("updateMill");
			JSONArray jsonArraydz = obj.getJSONArray("thunder_area_list");
			for (int i = 0; i < jsonArraydz.length(); i++) {
				JSONObject thunderObject = jsonArraydz.getJSONObject(i);
				AreaList areainfo = new AreaList();
				areainfo.id = thunderObject.getString("id");
				areainfo.city_name = thunderObject.getString("city_name");
				if (thunderObject.has("area_list")) {
					JSONArray array = thunderObject.getJSONArray("area_list");
					for (int j = 0; j < array.length(); j++) {
						JSONObject object = array.getJSONObject(j);
						CityInfo info = new CityInfo();
						info.id = object.getString("id");
						info.area_name = object.getString("area_name");
						areainfo.area_list.add(info);
					}
				}
				area_list1.add(areainfo);
			}

		} catch (JSONException e) {
			e.printStackTrace();
		}
	}

	@Override
	public String toString() {
		return null;
	}

	/**
	 * 根据名称获取城市ID
	 * 
	 * @return
	 */
	public String getById(String name) {
		if (area_list1 != null && area_list1.size() > 0) {
			for (int i = 0; i < area_list1.size(); i++) {
				if (name.equals(area_list1.get(i).city_name)) {
					return area_list1.get(i).id;
				}
			}
		}
		return "";
	}

	/**
	 * 根据城市ID和地区名称 来获取地区ID
	 * 
	 * @return
	 */
	public String getByAreaId(String ID, String name) {
		if (area_list1 != null && area_list1.size() > 0) {
			for (int i = 0; i < area_list1.size(); i++) {
				if (ID.equals(area_list1.get(i).id)) {
					int count=area_list1.get(i).area_list.size();//获取集合中的条数
					if ( count> 0) {
						for (int j = 0; j < count; j++) {
							if (name.equals(area_list1.get(i).area_list.get(j).area_name)) {
								return area_list1.get(i).area_list.get(j).id;
							}
						}
					}
				}
			}
		}
		return "";
	}

	public class AreaList {
		/**
		 * 城市id
		 */
		public String id = "";
		/**
		 * 城市名称
		 */
		public String city_name = "";
		public List<CityInfo> area_list = new ArrayList<CityInfo>();
	}

	// 列表二
	public class CityInfo {
		/**
		 * 地区编号
		 */
		public String id = "";
		/**
		 * 地区名称
		 */
		public String area_name = "";
	}

}
